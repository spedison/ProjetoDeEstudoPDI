package br.com.spedison.pds_test.ferramentas;

import br.com.spedison.usogeral.sinais.SinalSomaSenos;
import org.junit.Test;

import java.util.Arrays;
import java.util.stream.IntStream;

import static org.junit.Assert.assertEquals;

public class SinalSenoTest {

    final static String resultado = """
0,000000;0,000000
0,000011;0,879067
0,000022;1,754665
0,000033;2,623338
0,000044;3,481658
0,000056;4,326238
0,000067;5,153744
0,000078;5,960910
0,000089;6,744551
0,000100;7,501575
0,000111;8,228994
0,000122;8,923936
0,000133;9,583659
0,000144;10,205561
0,000156;10,787185
0,000167;11,326238
0,000178;11,820591
0,000189;12,268294
0,000200;12,667579
0,000211;13,016871
0,000222;13,314791
0,000233;13,560164
0,000244;13,752022
0,000256;13,889606
0,000267;13,972374
0,000278;14,000000
0,000289;13,972374
0,000300;13,889606
0,000311;13,752022
0,000322;13,560164
0,000333;13,314791
0,000344;13,016871
0,000356;12,667579
0,000367;12,268294
0,000378;11,820591
0,000389;11,326238
0,000400;10,787185
0,000411;10,205561
0,000422;9,583659
0,000433;8,923936
0,000444;8,228994
0,000456;7,501575
0,000467;6,744551
0,000478;5,960910
0,000489;5,153744
0,000500;4,326238
0,000511;3,481658
0,000522;2,623338
0,000533;1,754665
0,000544;0,879067
0,000556;0,000000
0,000567;-0,879067
0,000578;-1,754665
0,000589;-2,623338
0,000600;-3,481658
0,000611;-4,326238
0,000622;-5,153744
0,000633;-5,960910
0,000644;-6,744551
0,000656;-7,501575
0,000667;-8,228994
0,000678;-8,923936
0,000689;-9,583659
0,000700;-10,205561
0,000711;-10,787185
0,000722;-11,326238
0,000733;-11,820591
0,000744;-12,268294
0,000756;-12,667579
0,000767;-13,016871
0,000778;-13,314791
0,000789;-13,560164
0,000800;-13,752022
0,000811;-13,889606
0,000822;-13,972374
0,000833;-14,000000
0,000844;-13,972374
0,000856;-13,889606
0,000867;-13,752022
0,000878;-13,560164
0,000889;-13,314791
0,000900;-13,016871
0,000911;-12,667579
0,000922;-12,268294
0,000933;-11,820591
0,000944;-11,326238
0,000956;-10,787185
0,000967;-10,205561
0,000978;-9,583659
0,000989;-8,923936
0,001000;-8,228994
0,001011;-7,501575
0,001022;-6,744551
0,001033;-5,960910
0,001044;-5,153744
0,001056;-4,326238
0,001067;-3,481658
0,001078;-2,623338
0,001089;-1,754665
0,001100;-0,879067
""";
    @Test
    public void testaSeno() {
        SinalSomaSenos sss = new SinalSomaSenos(new double[]{14.}, new double[]{900});
        int pedacos = 100;
        double[] x = IntStream
                .range(0, pedacos)
                .mapToDouble(k -> k * (1. / 900.) * (1. / pedacos))
                .toArray();
        double[] y = Arrays
                .stream(x)
                .map(sss::calculaAmplitude)
                .toArray();
        StringBuilder sb = new StringBuilder();
        IntStream
                .range(0, x.length)
                .mapToObj(pos -> "%f;%f\n".formatted(x[pos], y[pos]))
                .forEach(sb::append);
        assertEquals(resultado, sb.toString());
    }
}
